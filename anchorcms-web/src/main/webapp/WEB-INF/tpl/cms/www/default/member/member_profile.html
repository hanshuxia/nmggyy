<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>${site.siteName} - Powered by ANCHORCMS</title>
  <link href="${resSys}/front.css" rel="stylesheet" type="text/css"/>
 <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="/${res}/resources/css/base.css"/>
  <link rel="stylesheet" type="text/css" href="/${res}/resources/css/company.css"/>
  <link rel="stylesheet" type="text/css" href="/${res}/resources/css/releasePower.css"/>
  <script src="${resSys}/jquery.js" type="text/javascript"></script>
  <script src="${resSys}/front.js" type="text/javascript"></script>
  <script src="${base}/thirdparty/My97DatePicker/WdatePicker.js" type="text/javascript"></script>
  <!--添加表单校验-->
  <script src="${base}/res/common/js/jquery.validate.js" type="text/javascript"></script>
  <script src="${base}/res/common/js/messages_zh.js" type="text/javascript"></script>
  <!--自己写校验方法-->
  <script type="text/javascript" charset="utf-8" src="/${res}/resources/js/validateCheck.js"></script>
  <script type="text/javascript">
    $().ready(function() {
      validform();
    });
    function validform(){
      /*关键在此增加了一个return，返回的是一个validate对象，这个对象有一个form方法，返回的是是否通过验证*/
      return $("#jvForm").validate();
    }
    $(document).ready(function(){
      var iframeHeight = window.top.$("#main").height();
      $(".member-main").css("height",iframeHeight-152);
    })
  </script>

  <style type="text/css">
    .wrapper{width: 95%;}
  </style>
  <!--[if lt IE 9]>
  <script src="/${res}/js/html5shiv.min.js"></script>
  <script src="/${res}/js/respond.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="nav">
  <div class="navTop wrapper">
    <span class="head">个人信息维护</span>
  </div>
  <div class="navTab wrapper">
    <a class="current first"  href="${base}/member/profile.jspx">修改个人资料</a>
    <a href="${base}/member/portrait.jspx">更换头像</a>
    <a href="${base}/member/pwd.jspx">修改密码</a>
  </div>
</div>
<div class="content wrapper">
  <form id="jvForm" action="profile.jspx" method="post">
    <div class="servicePower ">
      <div class="service-content wrapper">
        <div class="inputs">
          <label><i>*</i>&nbsp;性别：</label>
          [@p.radio name="gender" value=user.gender list={"true":"男","false":"女","":"保密"}/]
        </div>
        <div class="inputs">
          <label><i>*</i>&nbsp;真实姓名：</label>
          <input type="text" id="realname" name="realname" value="${user.realname!?html}" maxlength="100" class="member-change codeInput space" required/>
        </div>
        <div class="inputs">
          <label><i>*</i>&nbsp;手机：</label>
          <input type="text" name="mobile" value="${user.mobile!?html}" maxlength="50" class="member-change codeInput space"  required data-rule-phone="true" />
        </div>
        <div class="inputs">
          <label><i>*</i>&nbsp;QQ：</label>
          <input type="text" name="qq" value="${user.qq!?html}" maxlength="100" class="member-change codeInput space" required/>
        </div>
        <div class="inputs">
          <label><i>*</i>&nbsp;来自：</label>
          <input type="text" name="comefrom" value="${user.comefrom!?html}" maxlength="150" class="member-change codeInput space" required />
        </div>
        <div class="inputs">
          <label><i>*</i>&nbsp;出生日期：</label>
          <input type="text" name="birthday" value="${(user.birthday?string('yyyy-MM-dd'))!}" onclick="WdatePicker({dateFmt:'yyyy-MM-dd',maxDate:'%y-%M-%d'})" class="member-change date codeInput space" required />
        </div>
        <div class="inputs">
          <label><i>*</i>&nbsp;邮箱：</label>
          <input type="text" name="email" class="member-change email codeInput space" value="${user.email!?html}" required maxlength="59"/></td>
        </div>
        <div class="inputs">
          <label><i>*</i>&nbsp;固定电话：</label>
          <input type="text" name="phone" value="${user.phone!?html}" maxlength="50" class="member-change codeInput space" required data-rule-telephone="true" />
        </div>
        <div class="inputs">
          <label><i>*</i>&nbsp;MSN：</label>
          <input type="text" name="msn" value="${user.msn!?html}" maxlength="100" class="member-change codeInput space" required />
        </div>
      </div>
    </div>
    <div class="release-button1">
      <button type="button" class="btn submit" onclick="beforeSubmit()">提交</button>
      <button type="button" class="btn reset" onclick="rebot()">重置</button>
    </div>
  </form>
</div>
<script type="text/javascript">
  function beforeSubmit(){
    if(validform().form()) {
      if (confirm("请确认是否提交?")) {
        $('#jvForm').submit();
      }
    }
  }
  function rebot(){
    if(confirm("重置会覆盖未保存数据")){
      $('#jvForm')[0].reset();
    }
  }
</script>
</body>
</html>
