<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>产业深度融合对接明细</title>
    <link rel="shortcut  icon" type="image/x-icon" href="/${res}/resources/images/favicon.ico" media="screen"  />
    <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/${res}/resources/css/base.css"/>
    <link rel="stylesheet" type="text/css" href="/${res}/resources/css/contact.css"/>
    <link href="/${res}/css/logistics/layer.css" type="text/css" rel="stylesheet">

    <!--[if lte IE 9]>
    <script src="http://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="http://cdn.bootcss.com/html5media/1.1.8/html5media.min.js"></script>
    <script src="http://cdn.bootcss.com/respond.js/1.3.0/respond.min.js"></script>
    <script type="text/javascript" src="/thirdparty/jquery-placeholder/placeholder-ie9.js" ></script>
    <![endif]-->

    <link href="${resSys}/jqueryUI/jquery.ui.css" rel="stylesheet" type="text/css"/>
    <script src="${resSys}/jquery.js" type="text/javascript"></script>
    <script src="${resSys}/front.js" type="text/javascript"></script>
    <script src="${base}/thirdparty/ckeditor/ckeditor.js" type="text/javascript"></script>
    <script src="${base}/res/common/js/jquery.ext.js" type="text/javascript"></script>
    <script src="${resSys}/jqueryUI/jquery-ui.js" type="text/javascript"></script>
    <script src="${base}/thirdparty/swfupload/swfupload.js" type="text/javascript"></script>
    <script src="${base}/thirdparty/swfupload/swfupload.queue.js" type="text/javascript"></script>
    <script src="${base}/thirdparty/swfupload/fileprogress.js" type="text/javascript"></script>
    <script src="${base}/thirdparty/swfupload/handlers.js" type="text/javascript"></script>
    <link href="${base}/thirdparty/swfupload/process.css" rel="stylesheet" type="text/css"/>

    <!--添加表单校验-->
    <script src="${base}/res/common/js/jquery.validate.js" type="text/javascript"></script>
    <script src="${base}/res/common/js/messages_zh.js" type="text/javascript"></script>
    <!--自己写校验方法-->
    <script type="text/javascript" charset="utf-8" src="/${res}/resources/js/validateCheck.js"></script>
    <script type="text/javascript" src="/${res}/js/logistics/ui.js"></script>
    <script type="text/javascript" src="/${res}/js/logistics/layer.js"></script>

    <!--日期插件-->
    <script src="${base}/thirdparty/My97DatePicker/WdatePicker.js" type="text/javascript">
        function CurentTime() {
            var now = new Date();
            var year = now.getFullYear();
            var month = now.getMonth() + 1;
            var day = now.getDate();
            var hh = now.getHours();
            var mm = now.getMinutes();
            var clock = year + "-";
            if (month < 10)
                clock += "0";
            clock += month + "-";
            if (day < 10)
                clock += "0";
            clock += day + " ";
            if (hh < 10)
                clock += "0";
            clock += hh + ":";
            if (mm < 10) clock += '0';
            clock += mm;
            return (clock);}
    </script>
    <script type="text/javascript">
        //表单验证
        $().ready(function() {
            $("#release_form").validate()

        });


    </script>
    <link rel="stylesheet" type="text/css" href="/${res}/resources/css/releasePower.css"/>
    <!--级联菜单相关js-->
    <script type="text/javascript" charset="utf-8" src="/${res}/resources/js/commonDict.js"></script>
    <!--传文件相关-->
    <script type="text/javascript">




    </script>
    <style type="text/css">
        /*.wrapper {*/
        /*width: 95%;*/
        /*}*/
        .choose-catagory-layout {
            background-color: #fff;
            width: 670px;
            height: 250px;
            border: solid thin #ccc;
            z-index: 999;
        }
        .catagory-columns .catagory-ul {
            float: left;
            width: 330px;
            height: 200px;
            overflow-y: scroll;
            overflow-x: hidden;
            border-width: thin;
            border-style: solid;
            border-color: rgb(204, 204, 204);
            border-image: initial;
        }
        .catagory-columns .catagory-ul .catagory-li {
            line-height: 25px;
            width: 300px;
            height: 25px;
            cursor: pointer;
            text-indent: .8em;
        }
        body {background-image:url(../images/login/loginbg.png);}
    </style>
    [#include "image_upload.html" /]
    [#include "attachment_upload.html" /]
</head>
<body>


<div class="content wrapper">
    <form id="release_form" action="bigdata_registed_save.jspx" method="post">
        <!--需求信息-->
        <div class="servicePower">
            <div class="column wrapper"> <span class="head">对接企业信息</span> <span class="tips">
                <i>*</i>&nbsp;为必填项</span>
            </div>
            <div class="service-content wrapper">
                [#if sBigDataSign.status=='0']
                <div class="inputs">
                    <label><i>*</i>&nbsp;对接需求名称：</label>
                    <input class="power space" id="inquiryTheme" name="inquiryTheme" type="text" required maxlength="50" value="${sBigDataSign.demand.inquiryTheme!}" disabled>
                </div>
                [#else]
                <div class="inputs">
                    <label><i>*</i>&nbsp;对接能力名称：</label>
                    <input class="power space" id="ability" name="inquiryTheme" type="text" required maxlength="50" value="${sBigDataSign.ability.abilityName!}" disabled>
                </div>
                [/#if]
                <div class="inputs">
                    <label><i>*</i>&nbsp;企业全称：</label>
                    <input class="power space" id="companyName" name="companyName" type="text" required maxlength="50" value="${sBigDataSign.companyName!}" disabled>
                </div>
                <div class="inputs">
                    <label><i>*</i>&nbsp;企业类型：</label>
                    <input class="power space" id="companyType" name="companyType" type="text" required maxlength="50" value="${sBigDataSign.companyType!}" disabled>
                </div>
                <div class="inputs">
                    <label><i>*</i>&nbsp;企业规模：</label>
                    <select class="codeInput" name="companyScale" required disabled>
                        <option value="5人以下"[#if sBigDataSign.companyScale =="5人以下"]selected="selected"[/#if]>5人以下</option>
                        <option value="5-10人"[#if sBigDataSign.companyScale =="5-10人"]selected="selected"[/#if]>5-10人</option>
                        <option value="11-50人"[#if sBigDataSign.companyScale =="11-50人"]selected="selected"[/#if]>11-50人</option>
                        <option value="51-100人"[#if sBigDataSign.companyScale =="51-100人"]selected="selected"[/#if]>51-100人</option>
                        <option value="101-200人"[#if sBigDataSign.companyScale =="101-200人"]selected="selected"[/#if]>101-200人</option>
                        <option value="201-300人"[#if sBigDataSign.companyScale =="201-300人"]selected="selected"[/#if]>201-300人</option>
                        <option value="301-500人"[#if sBigDataSign.companyScale =="301-500人"]selected="selected"[/#if]>301-500人</option>
                        <option value="501-1000人"[#if sBigDataSign.companyScale =="501-1000人"]selected="selected"[/#if]>501-1000人</option>
                        <option value="1000人及以上"[#if sBigDataSign.companyScale =="1000人及以上"]selected="selected"[/#if]>1000人及以上</option>
                    </select>
                </div>
                <div class="inputs">
                    <label><i>*</i>&nbsp;企业类型：</label>
                    <select class="codeInput" name="companyType" required disabled>
                        <option value="国有企业" [#if sBigDataSign.companyType =="国有企业"]selected="selected"[/#if]>国有企业</option>
                        <option value="集体企业" [#if sBigDataSign.companyType =="集体企业"]selected="selected"[/#if]>集体企业</option>
                        <option value="股份合作企业" [#if sBigDataSign.companyType =="股份合作企业"]selected="selected"[/#if]>股份合作企业</option>
                        <option value="联营企业"[#if sBigDataSign.companyType =="联营企业"]selected="selected"[/#if]>联营企业</option>
                        <option value="有限责任公司"[#if sBigDataSign.companyType =="有限责任公司"]selected="selected"[/#if]>有限责任公司</option>
                        <option value="股份有限公司"[#if sBigDataSign.companyType =="股份有限公司"]selected="selected"[/#if]>股份有限公司</option>
                        <option value="私营企业"[#if sBigDataSign.companyType =="私营企业"]selected="selected"[/#if]>私营企业</option>
                        <option value="其他企业"[#if sBigDataSign.companyType =="其他企业"]selected="selected"[/#if]>其他企业</option>
                    </select>
                </div>
            </div>
        </div>



        <div class="servicePower">
            <label></label>
            <div class="column wrapper"> <span class="head">联系信息</span><span class="tips"><i>*</i>&nbsp;为必填项</span> </div>
            <div class="contact-content wrapper">


                <div class="inputs">
                    <label><i>*</i>&nbsp;联系电话：</label>
                    <input class="codeInput phone" id="mobile" name="mobile" value="${sBigDataSign.mobile?default('')}" disabled="disabled" type="text" placeholder="手机号码">
                </div>
                <div class="inputs commentDiv" id="distpicker1" data-toggle="distpicker">
                    <label><i>*</i>&nbsp;所在地区：</label>
                    <select class="resourceAddInput" id="addrProvince" name="addrProvince" style="width: auto;"
                            data-province="${sBigDataSign.addrProvince?default('')}" disabled></select>
                    <select class="codeInput" id="addrCity" name="addrCity" style="width: auto;"
                            data-city="${sBigDataSign.addrCity?default('')}" disabled></select>
                    <select class="codeInput" id="addrCounty" name="addrCounty" style="width: auto;"
                            data-district="${sBigDataSign.addrCounty?default('')}" disabled></select>
                    <input type="text" class="space" placeholder="街道信息" name="addrStreet" value="${sBigDataSign.addrStreet!}" maxlength="100" required disabled>
                </div>
            </div>
        </div>






        <div class="release-button">
            <button class="btn submit" type="button" onclick="javascript :history.go(-1)">返回</button>

        </div>
        <!--需求池展示频道id-->
        <input type="hidden" name="channelId" value="104">
        <input type="hidden" id="statusType" name="statusType" value="2">
        <input type="hidden" id="demandObjList" name="demandObjListJsonString" value="">
        <input type="hidden" id="frontStatus" name="frontStatus" value="${frontStatus?default('3')}">
    </form>
</div>

<script type="text/javascript" charset="utf-8" src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript" charset="utf-8" src="${base}/thirdparty/ueditor/ueditor.config.js"></script>
<script type="text/javascript" charset="utf-8" src="${base}/thirdparty/ueditor/ueditor.all.js"> </script>
<script charset="utf-8" src="/${res}/resources/js/mapDistPicker/distpicker.data.js" type="text/javascript"></script>
<script charset="utf-8" src="/${res}/resources/js/mapDistPicker/distpicker.js" type="text/javascript"></script>
<!--建议手动加在语言，避免在ie下有时因为加载语言失败导致编辑器加载失败-->
<!--这里加载的语言文件会覆盖你在配置项目里添加的语言类型，比如你在配置项目里配置的是英文，这里加载的中文，那最后就是中文-->
<script type="text/javascript" charset="utf-8" src="${base}/thirdparty/ueditor/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" charset="utf-8" src="/${res}/resources/js/breakingNews.js"></script>
<script type="text/javascript" charset="utf-8" src="/${res}/resources/js/head.js"></script>
<!--富文本编辑，粘贴图片-->
<script type="text/javascript">
    var editor = UE.getEditor('editor',{readonly:true,scaleEnabled:true,enableAutoSave: false});
    editor.addListener("ready", function () {
        // editor准备好之后才可以使用
        editor.setContent(html);
    });
</script>
<script language="javascript">
    UE.Editor.prototype._bkGetActionUrl = UE.Editor.prototype.getActionUrl;
    UE.Editor.prototype.getActionUrl = function(action) {
        if (action == 'uploadimage' || action == 'uploadscrawl' || action == 'uploadimage') {
            return "/ueditor/upload.jspx";
        } else {
            return this._bkGetActionUrl.call(this, action);
        }
    }
</script>
<!--by GJN-->
<script>

    function beforeSubmit(statusType){

        var type = "";
        $("input[name='dataSourse1']:checked").each(function () {
            if($(this).val()=="其他"){
                var a =$("input[name='dataSourse2']").val();
                type+="其他："+a;
            }else{
                type += $(this).val() + ",";
            }
        });
        var dataSourse = type.substring(0, type.length - 1);
        $("input[name='dataSourse']").val(dataSourse);

        var type = "";
        $("input[name='dataCirculationPlatform1']:checked").each(function () {
            if($(this).val()=="其他"){
                var a =$("input[name='dataCirculationPlatform2']").val();
                type+="其他："+a;
            }else{
                type += $(this).val() + ",";
            }
        });
        var dataCirculationPlatform = type.substring(0, type.length - 1);
        $("input[name='dataCirculationPlatform']").val(dataCirculationPlatform);


        var type = "";
        $("input[name='hardware1']:checked").each(function () {
            if($(this).val()=="其他"){
                var a =$("input[name='hardware2']").val();
                type+="其他："+a;
            }else{
                type += $(this).val() + ",";
            }
        });
        var hardware = type.substring(0, type.length - 1);
        $("input[name='hardware']").val(hardware);

        var type = "";
        $("input[name='basicSoftware1']:checked").each(function () {
            if($(this).val()=="其他"){
                var a =$("input[name='basicSoftware2']").val();
                type+="其他："+a;
            }else{
                type += $(this).val() + ",";
            }
        });
        var basicSoftware = type.substring(0, type.length - 1);
        $("input[name='basicSoftware']").val(basicSoftware);

        var type = "";
        $("input[name='applicationSoftware1']:checked").each(function () {
            if($(this).val()=="其他"){
                var a =$("input[name='applicationSoftware2']").val();
                type+="其他："+a;
            }else{
                type += $(this).val() + ",";
            }
        });
        var applicationSoftware = type.substring(0, type.length - 1);
        $("input[name='applicationSoftware']").val(applicationSoftware);

        var type = "";
        $("input[name='infrastructure1']:checked").each(function () {
            if($(this).val()=="其他"){
                var a =$("input[name='infrastructure2']").val();
                type+="其他："+a;
            }else{
                type += $(this).val() + ",";
            }
        });
        var infrastructure = type.substring(0, type.length - 1);
        $("input[name='infrastructure']").val(infrastructure);

        var type = "";
        $("input[name='systemIntegration1']:checked").each(function () {
            if($(this).val()=="其他"){
                var a =$("input[name='systemIntegration2']").val();
                type+="其他："+a;
            }else{
                type += $(this).val() + ",";
            }
        });
        var systemIntegration = type.substring(0, type.length - 1);
        $("input[name='systemIntegration']").val(systemIntegration);

        var type = "";
        $("input[name='enterpriseApplication1']:checked").each(function () {
            if($(this).val()=="其他"){
                var a =$("input[name='enterpriseApplication2']").val();
                type+="其他："+a;
            }else{
                type += $(this).val() + ",";
            }
        });
        var enterpriseApplication = type.substring(0, type.length - 1);
        $("input[name='enterpriseApplication']").val(enterpriseApplication);

        var result = checkPicture();
        var result1 = checkEdit();
        var result1 = checkBigdata();
//        var result3 = grandSubCheck();
        var result4 = checkContact(); // 联系人非空检验
//        var taxRegNoResult = isValidBusCode("nsrsbh");
        var obj = $("#bjTable tbody").find(".infoSelected");
        if (obj != undefined) {
            if (obj.length != 0) {
                window.isDef += 1;
            }
        }


        if(validform().form()){
            if(result && result1 /* && taxRegNoResult*/) {
                if (result4 == false) {
                    ui.alertFail("请在本页面底部【新增联系人信息】");
                    return false;
                }
                if (window.isDef < 1) {
                    ui.alertFail("请在本页面底部选择发布需求的联系人信息");
                    return false;
                }
                $('#statusType').val(statusType);
                var typestr = (statusType=="2")?"是否发布？":"是否保存到草稿？";
                if(confirm("请确认"+typestr+"")){
                    $('.btn.submit').attr("disabled",true);
                    $('.btn.cancel').attr("disabled",true);
                    $('#release_form').submit();
                }
            }
        }
    }

</script>

</body>
</html>